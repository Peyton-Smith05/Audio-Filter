# -*- coding: utf-8 -*-
"""sound_feedback.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1Ef2I18z2rZTL0_0RCa3JBeaUGsowK_Xq

# Python Mini Project

## Different types of echo filters

* Source: https://github.com/spatialaudio/signals-and-systems-lecture/blob/master/discrete_systems_time_domain/convolution_room_IR.ipynb
"""

# Commented out IPython magic to ensure Python compatibility.
# %matplotlib inline
import numpy as np
import matplotlib.pyplot as plt
import soundfile as sf
import scipy.signal as sig

"""# Collecting waveform data

* putting data into x 
* plotting x with respect to time for comparison purposes
"""

x, fs = sf.read('sample_data/data_speech.wav')
plt.figure(figsize=(8,4))
t = np.arange(len(x)) / fs

plt.plot(t, x)
plt.xlabel(r'$t$ in s')
plt.ylabel(r'$x[k]$')
plt.axis([0, t[-1], -1, 1]);

"""# Creating function for both filters

* First function is for multi echo filter
  * ![image.png](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUYAAABYCAYAAACJfF6vAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAABQgSURBVHhe7Z0HeBRFG8dHsWHBXlGMDUXsIkosmKAUG4qCWFAQGxYkIip27AJGscWCsaNgxd47Ym+IFJWIYsGGXcSy3/6GnXzLcpdc2b1c8P97nnvudvey2Zudfedt885Cno8RQghRy8LBuxBCiAAJRiGEiCDBKIQQESQYhRAiggSjEEJEkGAUQogIEoxCCBFBglEIISJIMAohRAQJRiGEiCDBKIQQESQYhRAiggSjEEJEkGAUQogIEoxCCBFBglEIISJIMAohRAQJRiGEiKClDWKEpvz333/t5yZNmth3CO9faKGFzMILazwSopjRExojEydONGeccYbp2rWrmTp1arDXmClTppiKigrTr18/8+yzz1pBmS2//fabGTVqlPnzzz+DPUKIpJDGGDPV1dXmpptuMmVlZebcc88N9hrzwAMPmFVXXdW0a9cu2JMZs2fPNlVVVaampsY8+eST5rXXXjPLLrtscFQIkQTSGGPmr7/+MsOHDzd33XWX+eKLL4K9xrz33numZcuWwVbmLLHEEua4444z/fv3N4sttliwVwiRJBKMMYKZi/DafPPNTfPmzc2NN95ofYuzZs0yv/76a86a3qKLLhp8EkIUAgnGGMGXuPLKK1str2/fvmb06NHWN4gZjLBcZJFFgm8KIYoZ+RhjZMSIEaZz585mww03tBoinwm4ICjbtGlj1l577eCbc32OH3/8cbA1P1tttZUpLy8Ptoz9brdu3cxLL70kH6MQCSONMSYwoz/99FPTokULu7300kubww8/3Fx44YVm+vTptfsdm2yyiSktLU37Wn/99YNvCiEKjQRjTHz33XempKTENG3aNNhjTKdOnczPP/9sBSb5i2EQfKkEontFBakQonBIMOYJnggizpjR77//vvnkk0+CI8asttpq5uijj7b+xVz5559/bO7jww8/bH766SczduxY88YbbwRHhRBJIB+jEEJEkMYohBARJBiFECKCBKMQQkSQYBRCiAgKvsQE0eM5c+YEW/HDtEDNnBGiMEgwxsQzzzxjdt99d5voTb3Ftm3bmpVWWik4mh6a/++//7Z/R87jN998Y77+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)
  * Utilizing varying ranges for alpha R and N to get the right echo

* Second function is for feedback comb filter
  * ![image.png](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUsAAAA5CAYAAAC/KgngAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAA4bSURBVHhe7Z0HkBRFFIYbc8KcxZwDZhQMYFZMWJYWahlQBAPmXJhQoVSMUAaMpRgxl1kUQ5HMillRjGCWpJgd53vXA3N7e3u9u+OG8/+qtu5mdnZv5k33/1IPtIlinBBCiILM5n8KIYQogMRSCCECkFgKIUQAEkshhAhAYimEEAFILIUQIgCJpRBCBCCxFEKIACSWQggRgMRSCCECkFgKIUQAEkshhAhAYimEEAFILIUQIgCJpRBCBCCxFEKIACSWQggRgMRSCCECkFgKIUQAVfs/eP7++2/3119/2e9zzjmnm222cN3mc3y+TZs29ll+thbKsUst8+eff7p//vnHrofrqkXKsT3XxjVCLdy3xNblwHdAaxmD5VI1Kzz++ONur732cocffrh75513/N4wbrzxRtejRw+32267uU8//dTvbR2UY5da5vzzz7d71qdPH7+n9ijH9i+//LJd3z777ONGjx7t91aHyZMnu8GDB/ut0nnwwQfd/fff77dE1SLL2267zc2YMcMdccQRfk/x7Lfffu7cc891a6+9tt9T/2Rhl0pABMZEGj9+vJs6dapr27atW3DBBe09frZr186ts8469jNN79693fXXX++3aossbH/DDTe45ZZbzu26665+T+WZNGmSO++889x1113n95TG5ZdfbtH2qaee6vdUh2+++cYttNBCbt555/V7qoPia1ESs88+u9txxx3dqquu6gYNGuRWWGEFd8ABB9hrp512cj/99JPbYYcd3EMPPeQ/IURx/Pbbb+6aa65xW265pXv//ff93uohsRQlQZ140UUXtShm7rnndltttZVbcskl7UU0SdS/zTbbuCOPPNJ9/vnn/lOlQ2r73Xff+S3R2rnrrrvchRde6L7++msbY0S41UZiKcriueeec2uttVaTdBtInUjRGfDlQKWI1P29997ze0Q9QgPs9ddfd19++aXf0zz777+/lRK23XZbv6f6SCxFyRDpvfHGG2733Xd388wzj9/bAJ3U1157zep3K620kt8r/o/gMGk4kW2MGDHCzTfffP6d+iJTsfzxxx/dVVdd5U488UTrDqZ7RzQDRo4c6beaMm3aNHfttde6448/3rzPt99+64YNG+YGDBjgTj75ZPfSSy81+r5aAA9JZx4PePHFF1t97vfff7f3OFdqLkDTgObBKaec4u64445GKQXp5c033zxzmUYuf/zxh6Uk2PTee+91U6ZMcU888YS76KKLzC733HPPzOUulQahZCJQo0zDOd90002WPnHuSy+9tH+n8nA/Hn30UevGn3baabZ6grHJ/Tr77LPdBx984I9sSi3bvhQYkxMmTHBDhgxx/fr1c5dccomtAEjGI+9zzVnAd33xxReWESCSzG/GOc2ixRZbzB9VX2QmlhiHAUWBf8UVV7TBlAgHQtC/f/+Cy3xefPFFi1DWXHNNd9BBB5mRt99+e9e3b1/XqVMnM/gPP/zgjw7nl19+cc8++6x75plngl54vu+//95/unlGjRpl59mxY0d31llnuRNOOMHdd9991kHEFnwHgxKefvppt/XWW5uoMFjS349zef755/1WU5jMyy+/vOvWrZvV//hbpL1M/GQpzocffuiPrhxcI+dN3ZJ7BggnNmTpDec9fPhw16FDB3uvWrD8ZfXVVze7UUM9+OCD3ZtvvumOPvpoe++WW27xRzalVm1fKggj84ixeM4551hgMnToUHf77bfb+1999ZV78skn7fdyoLmHvZgf2A+Hg+0oy9QzmYnl22+/beH1Ioss4l599VUTzDnmmMPe+/jjj23tFzcpH4gpg26ppZayaIRI7MADD3SLL764NRJoIOCZfv31V/+JcBCmsWPHmhiHvDj2s88+85/ODxHlUUcdZa91113XOsOc4x577GEDA4EeN26cCSkCwvUzaEhL8arJEgicyVtvveX23HPPZhf+UqfbYIMNrO5Hzad79+5u5ZVXtuPnmmsu2/fzzz/7oysHf5frQSwfeeQRm3BEzSxXwRZMjnx1zEqC3clQEEvsxVii2cT63AUWWMAc+EknneSPbkqt2r4U6CYTeFxxxRU2ZpNr6NKlixs4cKBFzR999JFbf/31/SeKA1uQJREk4UQIdJ566inXtWtXt/DCC/uj6psGNcsAxHG11VYzo48ZM8Y8diKWRHYIHwMtH9w4BiI3D/HYe++9Gx3LoOXzyTq+YqBeduaZZ/qt8iGiuuCCC+xcOM/000PYgFLE9OnTLQXp2bOnCeJhhx1m10gKt++++870sAxOJlvnzp1t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)
  * Utilizes R and alpha to get a diminishing echo for the response
"""

'''
TODO:

* Define parameters alpha, R, and N
    * alpha^k is the magnitude
    * k*R is the offset
    * k iterates from 0 to N-1

* for each value in x 
    * propogate its echo N-1 times
        * for each propogation add it to the sum
    * add to y vector
'''
def multiEchoFilter(waveform, alpha, R, N):
  y = []

  pos = 0
  for x_val in waveform:
    Sum = 0

    for k in range(N-1):
      
      if ((pos-(k*R)) > 0):
        Sum += (waveform[pos-k*R] * (alpha**k))
      else:
        break
    
    y.append(Sum + waveform[pos])

    pos+=1
  return y



''' 
iterate through waveform array
  For each iteration use formulat alpha*y + x and add it to y
'''
def feedbackCombFilter(waveform, alpha, R):
  y = []
  for i in range(len(waveform)):
    if(i-R > 0):
      cur = alpha*y[i-R] + waveform[i]
      y.append(cur)
    else:
      y.append(waveform[i])

  return y

"""# Inputing parameters

* Multiecho Filter
  * Parameters where chosen as 
  * alpha = .7
    * Through experimenting with different values I discovered that the Alpha value changes how soon the echo diminishes. With an alpha value < .5 there were not enough strong echos for it to sound the the given wet_source.wav. Upon further auditory testing I decided .7 was the closest to it.
  * R = 7777
    * The R value changes how far apart the echos are. This one was hard to determine because in the x array each data point accounts for about .0001 of a second. This meant that the R value needed to be high so that the echos carried out accross multiple seconds. Anything under 5000 I determined was too quick and did not sound right. The actual value of 7777 was slightly arbitrary. I just determined that the 7-8 thounsand range sounded the best and looked the most similar graphically.
  * N = 5 
    * N increases the runtime of the function dramatically. Anything over 15 it starts to take over 20 seconds to run, mostly because of the size of the array. The only noticable change in make is the clarity of the echo. To high and it is not clear, too low and it is too clear.

* Feedback Comb filter
  * alpha = .7 again
    * Alpha in this equation also does something similar by determining how quickly the echo fades. Upon auditory and graphically testing, it was determined to be .7 again.
  * R = 6000 
    * R value increases the noisiness of the echo. Anything over 6000 was determined to be too cluttered and noisy.
"""

# Define parameters for multiecho filter
alpha, R, N = .7, 7777, 5

y_mul_echo = multiEchoFilter(x,alpha, R, N)

# Defining parameters for feedback comb filter
alpha, R = .7, 6000

y_f_comb = feedbackCombFilter(x,alpha, R)

"""## Computing the convolution"""

# Plotting both filters

# Multi Echo 
plt.figure(figsize=(8,4))
plt.plot(t, y_mul_echo)
plt.title("Multiecho Filter")
plt.xlabel(r'$t$ in s')
plt.ylabel(r'$y[n]$');

# Feedback Comb
plt.figure(figsize=(8,4))
plt.plot(t, y_f_comb)
plt.title("Feedback Comb Filter")
plt.xlabel(r'$t$ in s')
plt.ylabel(r'$y[n]$');


# Plotting convolution for comparison
h, fsh = sf.read('sample_data/data_room_impulse_response.wav')
y = np.convolve(h, x)
#normalizing
y = max(x) * y / np.max(np.abs(y))
plt.figure(figsize=(8,4))
t = 1/fs*np.arange(len(y))
plt.plot(t, y)
plt.xlabel(r'$t$ in s')
plt.ylabel(r'$y[k]$');

"""## Writing to output files"""

# Writing two files
sf.write('multiEchoFilter.wav', y_mul_echo, fs)
sf.write('FeedbackCombFilter.wav', y_f_comb, fs)